(()=>{"use strict";const e="http://localhost:9000",t=async(t="")=>(t=e+t,await fetch(t).then((e=>e.json()))),n=async(t="",n)=>(t=e+t,await fetch(t,{method:"PUT",body:JSON.stringify(n),headers:{"Content-type":"application/json"}}).then((e=>e.json())));(()=>{const a=document.querySelector("#table tbody"),r=document.querySelector("#post"),s=document.querySelector("#patch"),o=document.querySelector("#delete"),l={username:null,body:null,email:void 0},d=document.querySelector("#user-name"),u=document.querySelector("#user-email"),c=document.querySelector("#user-comment"),i=document.querySelector("#user-id");d.addEventListener("input",(()=>{l.username=d.value})),u.addEventListener("input",(()=>{l.email=u.value})),c.addEventListener("input",(()=>{l.body=c.value})),a.innerHTML="<tr><td>Loading...</td></tr>",t("/users").then((e=>{a.innerHTML="",e.forEach(((e,t)=>{t+=1,a.insertAdjacentHTML("beforeend",`\n                <tr>\n                    <th scope="row">${t}</th>\n                    <td>${e.username}</td>\n                    <td>${e.email}</td>\n                    <td>${e.body}</td>\n                    <td>\n                        <button class="btn btn-warning" data-user-patch-id="${e.id}">Patch</button>\n                    </td>\n                    <td>\n                        <button class="btn btn-danger" data-user-delete-id="${e.id}">Delete</button>\n                    </td>\n                </tr>\n            `)}));const r=document.querySelectorAll("[data-user-patch-id]"),s=document.querySelectorAll("[data-user-delete-id]");(r&&r?.length||s&&s?.length)&&r.forEach((e=>{e.addEventListener("click",(e=>{const a=e.target.dataset.userPatchId;""==d.value||""==u.value||""==c.value?t(`/users/${a}`).then((e=>{d.value=e.username,u.value=e.email,c.value=e.body,i.value=e.id})):n(`/users/${a}`,l).then((()=>{alert("UPDATED")})).catch((e=>{alert(`ERROR: ${e.message}`),console.error(e)}))}))}))})),r.addEventListener("click",(()=>{(async(t="",n={})=>(t=e+t,await fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-type":"application/json"}}).then((e=>e.json()))))("/users",l).then((()=>{alert("POSTED")})).catch((e=>{alert(`Sizning xatoyingiz: ${e.message}`),console.error(e)}))})),s.addEventListener("click",(()=>{""==d.value||""==u.value||""==c.value?t(`/users/${i.value}`).then((e=>{d.value=e.username,u.value=e.email,c.value=e.body})):n(`/users/${i.value}`,l).then((()=>{alert("PATCHED")})).catch((e=>{alert(`Sizning xatoyingiz: ${e.message}`),console.error(e)}))})),o.addEventListener("click",(()=>{(async(t="")=>(t=e+t,await fetch(t,{method:"DELETE"}).then((e=>e.json()))))(`/users/${i.value}`).then((()=>{alert("DELETED")})).catch((e=>{alert(`ERROR: ${e.message}`),console.error(e)}))}))})()})();